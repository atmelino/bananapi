<html>
<head>
<title>Power Monitor</title>

<link rel="stylesheet" href="../../lib/jquery-ui-1.10.3/themes/base/jquery.ui.all.css">
<script src="../../lib/jquery-ui-1.10.3/jquery-1.10.2.min.js"></script>
<script src="../../lib/jquery-ui-1.10.3/ui/minified/jquery-ui.min.js"></script>
<link rel="stylesheet" type="text/css" href="../../lib/jquery-ui-1.10.3/themes/smoothness/jquery-ui.css">
<link rel="stylesheet" href="../../lib/jquery-ui-1.10.3/plugins/spinner-layout/jquery.ui.spinner.css">
<script src="../../lib/jquery-ui-1.10.3/plugins/spinner-layout/jquery.ui.spinner.js"></script>
<script src="../../lib/sprintf/sprintf.js"></script>
<link rel="stylesheet" href="../../lib/alerts/jquery.alerts.css" type="text/css" media="screen" />
<script src="../../lib/alerts/jquery.alerts.js"></script>
<link rel="stylesheet" href="jquery.dialog.css">
<script src="jquery.dialog.js"></script>

<link rel="stylesheet" type="text/css" href="../../lib/jquery-ui-1.10.3/plugins/DataTables/css/jquery.dataTables.css">
<script src="../../lib/jquery-ui-1.10.3/plugins/DataTables/js/jquery.dataTables.js"></script>

<script type="text/JavaScript" src="globals.js"></script>
<script type="text/JavaScript" src="ajaxFunctions.js"></script>
<script type="text/JavaScript" src="functions.js"></script>
<script type="text/JavaScript" src="powerMonitorFunctions.js"></script>

<style type="text/css">
.controls {
	display: inline-block;
	margin: 10px;
}

.vertical input {
	width: 3ch;
	height: 4em;
}

.spinnersize1 input {
	font-size: 8pt;
	display: inline-block;
	margin: 10px;
	/*width: 30px;*/
	width: 6ch;
}

#dataDiv {
	font-family: monospace;
	/*font-size: 8pt;*/
}
</style>

<script type="text/javascript">
	header = sprintf('%22s %7s %6s %8s', 'date   ', 'Volt ', 'mA ', 'mW ');
	var oTable;

	function onload_function() {
		//printlnMessage('messages', 'onload home');
	}

	// 	$(document).ready(function() {
	// 		$('#example').DataTable({
	// 			data : dataSet,
	// 			columns : [ {
	// 				title : "Name"
	// 			}, {
	// 				title : "Position"
	// 			}, {
	// 				title : "Office"
	// 			}, {
	// 				title : "Extn."
	// 			}, {
	// 				title : "Start date"
	// 			}, {
	// 				title : "Salary"
	// 			} ]
	// 		});
	// 	});

	// 	$(document).ready(function() {
	// 		$('#example').DataTable();
	// 	});

	// 	$(document).ready(function() {
	// 		var oTable = $('#example').dataTable({
	// 			"bProcessing" : true,
	// 			"bServerSide" : true,
	// 			"sAjaxSource" : "server_processing04.php",

	// 			fnRowCallback : function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
	// 				// Row click
	// 				$(nRow).on('click', function() {
	// 					console.log('Row Clicked', this, aData, iDisplayIndex, iDisplayIndexFull);
	// 				});

	// 				// Cell click
	// 				$('td', nRow).on('click', function() {
	// 					console.log('Col Clicked.', this, aData, iDisplayIndex, iDisplayIndexFull);
	// 				});
	// 			}

	// 		});

	// 		var table = $('#example').DataTable();

	// 		var columns = table.columns();
	// 		//alert(columns);

	// 		//table.column('2').visible(false);

	// 	});

// 	$(document).ready(function() {
// 		$('#example').dataTable({
// 			'bSort' : false,
// 			'aoColumns' : [ {
// 				sWidth : "45%",
// 				bSearchable : false,
// 				bSortable : false
// 			}, {
// 				sWidth : "45%",
// 				bSearchable : false,
// 				bSortable : false
// 			}, {
// 				sWidth : "10%",
// 				bSearchable : false,
// 				bSortable : false
// 			} ],
// 			"scrollY" : "200px",
// 			"scrollCollapse" : true,
// 			"info" : true,
// 			"paging" : true
// 		});
// 	});

	function dayComboSelect() {
		getRange(0, 20);
	}

	function getRange(limit, range) {
		var date = getSelectedText("dayComboBox");
		document.getElementById('from').innerText = limit + 1;
		document.getElementById('to').innerText = limit + range;

		if (date != "select a date") {
			myParams = {
				fs : 'loadValues',
				date : date,
				limit : limit,
				range : range
			};
			//printlnMessage('messages', "load values clicked");
			ajax_loadValues(myParams);
		}
	}

	$(function() {

		periodSpinner = $('#periodID  input').spinner({
			min : 1,
			max : 100,
			alignment : 'horizontal'
		}).val(2);

		$('#periodID').on("spinstop", function(event, ui) {
			period = periodSpinner.spinner("value");
			printlnMessage('messages', "period " + period);
		});

		$("#exitPython").click(function() {
			printlnMessage('messages', 'end python program');
			myParams = {
				fs : 'sendMessage',
				exit : 1,
			};
			ajax_sendMessage(myParams);
		});

		$("#sendMessage").click(function() {
			if (document.getElementById('simulation').checked)
				simulation = 1;
			else
				simulation = 0;
			var line4 = document.getElementById("line4").value;
			printlnMessage('messages', line4);
			var d = new Date();
			myParams = {
				date : d,
				simulation : simulation,
				fs : 'sendMessage',
				line4 : line4,
				param2 : 55
			};
			ajax_sendMessage(myParams);
		});

		$("#showTables").click(function() {
			myParams = {
				fs : 'showTables',
			};
			ajax_showTables(myParams);
		});

		$("#F").click(function() {
			start = parseInt(document.getElementById('to').textContent);
			//printlnMessage('messages', start);

			getRange(start, 20);
		});

		$("#R").click(function() {
			start = parseInt(document.getElementById('to').textContent) - 40;
			printlnMessage('messages', start);

			getRange(start, 20);
			//getRange(0, 20);
		});

		$('#getValuesLoop').click(function() {
			// printlnMessage('messages', 'type clicked');
			if ($(this).is(':checked')) {
				printlnMessage('messages', 'timer started');
				printlnMessage('messages', header);
				getValuesTimerFunc();
			} else {
				printlnMessage('messages', 'timer stopped');
				clearTimeout(getValuesTimer);
			}
		});

		$("#prompt_DB").click(
				function() {

					// read data from cookies
					if (existCookie('hostname') != true)
						setCookie('hostname', "localhost", 100);

					hostname = getCookie('hostname');
					username = "solarPanel";
					password = "solarPanel";
					database = "solarPanel";
					jPromptDatabase(hostname, username, password, database,
							mycallback);
				});

	});

	function mycallback(e, newhostname, newusername, newpassword, newdatabase) {
		//jAlert("You name :" + value + ":");
		printlnMessage('messages', newhostname);
		printlnMessage('messages', newusername);
		printlnMessage('messages', newpassword);
		printlnMessage('messages', newdatabase);
		setCookie('hostname', newhostname, 100);
	}
</script>


</head>
<body onload="onload_function()">

	<div>

		<button id='sendMessage'>sendMessage</button>
		<!-- -->
		<input value="line4" id=line4>
		<!-- -->
		<button id='exitPython'>end python program</button>
		<!-- -->
		<label><input type="checkbox" name="simulation" id="simulation" value="male"> Simulation</label>
		<!-- -->
		<br> period <span id='periodID' class="horizontal controls"><input /></span>s<br>
		<!-- -->
		<label><input type="checkbox" name="saveSQL" id="saveSQL" value="male"> Save to mySQL</label>
		<!-- -->
		<button id="prompt_DB">Set Database Server</button>
		<!-- -->
		<button id="showTables">Show Tables</button>
		<select id="dayComboBox" onchange="dayComboSelect()">
			<option value='sat'>Select a Table</option>
		</select>
		<!-- -->


	</div>


	<div id='dataDiv'>
		showing records <label id="from">1 </label> to <label id="to">20 </label> of <label id="of">100 </label>
		<button id="RR">&lt;&lt;</button>
		<!-- -->
		<button id="R">&lt;</button>
		<!-- -->
		<button id="F">&gt;</button>
		<!-- -->
		<button id="FF">&gt;&gt;</button>
		<!-- -->
		<br>
		<div id="data"></div>
	</div>
	<div id='messagesDiv'>
		<textarea id="messages" cols=100; rows=20;></textarea>
	</div>


	<table id="example" class="display" cellspacing="0" width="100%">
		<thead>
			<tr>
				<th>Name</th>
				<th>Position</th>
				<th>Office</th>
				<th>Age</th>
				<th>Start date</th>
				<th>Salary</th>
			</tr>
		</thead>
		<tfoot>
			<tr>
				<th>Name</th>
				<th>Position</th>
				<th>Office</th>
				<th>Age</th>
				<th>Start date</th>
				<th>Salary</th>
			</tr>
		</tfoot>
		<tbody>
			<tr>
				<td>Tiger Nixon</td>
				<td>System Architect</td>
				<td>Edinburgh</td>
				<td>61</td>
				<td>2011/04/25</td>
				<td>$320,800</td>
			</tr>
			<tr>
				<td>Jonas Alexander</td>
				<td>Developer</td>
				<td>San Francisco</td>
				<td>30</td>
				<td>2010/07/14</td>
				<td>$86,500</td>
			</tr>
			<tr>
				<td>Donna Snider</td>
				<td>Customer Support</td>
				<td>New York</td>
				<td>27</td>
				<td>2011/01/25</td>
				<td>$112,000</td>
			</tr>
		</tbody>
	</table>


</body>
</html>
